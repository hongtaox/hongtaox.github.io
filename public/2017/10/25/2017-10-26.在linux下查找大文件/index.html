<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>linux下查找大文件 | ______</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">linux下查找大文件</h1><a id="logo" href="/.">______</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">linux下查找大文件</h1><div class="post-meta"><a href="/2017/10/25/2017-10-26.在linux下查找大文件/#comments" class="comment-count"></a><p><span class="date">Oct 25, 2017</span><span><a href="/categories/linux/" class="category">linux</a></span></p></div><div class="post-content"><h1 id="linux下查找大文件"><a href="#linux下查找大文件" class="headerlink" title="linux下查找大文件"></a>linux下查找大文件</h1><p>1.查找大文件：</p>
<p>find . -type f -size +100M #查找100M以上的文件</p>
<p>对查找结果按照文件大小做一个排序</p>
<p>find . -type f -size +100M  -print0 | xargs -0 du -h | sort -nr</p>
<p>2.查找当前目录下前20的大目录</p>
<p>sudo du -hm –max-depth=2 | sort -nr | head -20</p>
<p>LINUX的磁盘管理du命令详解</p>
<p>du(disk usage)命令可以计算文件或目录所占的磁盘空间。没有指定任何选项时，它会测量当前工作目录与其所有子目录，分别显示各个目录所占的快数，最后才显示工作目录所占总快数。<br>命令用途<br>du(disk usage)命令可以计算文件或目录所占的磁盘空间。没有指定任何选项时，它会测量当前工作目录与其所有子目录，分别显示各个目录所占的快数，最后才显示工作目录所占总快数。</p>
<p>命令格式</p>
<p>du [OPTION]… [FILE]…<br>-a, –all  包括了所有的文件，而不只是目录<br>–apparent-size   print apparent sizes, rather than disk usage; although the apparent size is usually smaller, it may be larger due to holes in (’sparse’) files, internal fragmentation, indirect blocks, and the like<br>-B, –block-size=SIZE use SIZE-byte blocks<br>-b, –bytes 以字节为计算单位<br>-k    以千字节（KB）为计算单位<br>-m    以兆字节（M）为计算单位<br>-c, –total 最后加上一个总计（系统缺省）<br>-D, –dereference-args  dereference FILEs that are symbolic links<br>-H    跟 –si效果一样。<br>-h, –human-readable   以比较阅读的方式输出文件大小信息 (例如，1K 234M 2G)。注：该选项在很多其他命令（df, ls）中也有效。<br>–si   跟-h 效果一样，只是以1000为换算单位<br>-l, –count-links 计算所有的文件大小，对硬链接文件，则计算多次。<br>-L, –dereference 显示选项中所指定符号连接的源文件大小。<br>-P, –no-dereference 不跟随任何的符号连接（缺省）<br>-S, –separate-dirs 计算目录所占空间时不包括子目录的大小。<br>-s, –summarize      只显示工作目录所占总空间<br>-x, –one-file-system 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。<br>-X FILE, –exclude-from=FILE 排除掉指定的FILE<br>–exclude=PATTERN 排除掉符合样式的文件,Pattern就是普通的Shell样式，？表示任何一个字符，*表示任意多个字符。<br>–max-depth=N  只列出深度小于max-depth的目录和文件的信息 –max-depth=0 的时候效果跟–s是 一样</p>
<p>使用案例</p>
<p>root@ubuntu:/# cd /home/web/<br>root@ubuntu:/home/web#  du -s<br>793832 .–不指定FILE名字计算出当前目录所占用的空间大小。<br>root@ubuntu:/#$ du -sh<br>776M    .–不指定FILE名字计算出当前目录所占用的空间大小。-h选项使得输出结果跟容易阅读（跟上例比较）<br>root@ubuntu:/#$ du –max-depth=1 -h<br>–输出当前目录下各个子目录所使用的空间<br>83M     ./java<br>87M     ./build<br>197M    ./jboss<br>128M    ./lib<br>1.1M    ./bin<br>52K     ./synclogs<br>4.8M    ./sql<br>920K    ./conf<br>52K     ./logs<br>20K     ./mail_group<br>56K     ./.svn<br>144M    ./htdocs<br>56K     ./jboss-conf<br>2.7M    ./auto-conf<br>8.0K    ./.mule<br>23M     ./classes<br>43M     ./templates<br>144K    ./project<br>776M    .</p>
<p>找出大文件<br>磁盘空间被耗尽的时候，免不了要清理一下，比如说/home目录太大，就可以使用下面命令看看到底是谁：</p>
<p>du -s /home/* | sort -nr</p>
<p>linux磁盘空间不足怎么办，磁盘清理方法</p>
<p>由于当初安装系统设计不合理，有些分区的过小，以及网络通讯故障等造成日志文件速度增长等其他原因都可以表现为磁盘空间满，造成无法读写磁盘，应用程序无法执行等。下面就给你支几招（以/home空间满为例）：</p>
<p>定期对重要文件系统扫描，并作对比，分析那些文件经常读写</p>
<p>#IS-IR/home&gt;;files.txt</p>
<p>#diff filesold.txt files.txt</p>
<p>通过分析预测空间的增长情况，同时可以考虑对不经常读写文件进行压缩，以减少占用空间。</p>
<p>查看空间文件系统的inodes消耗</p>
<p>#df-i/home</p>
<p>如果还有大量的inpde可用，说明大文件占用空间，否贼可能大量小文件占用空间。</p>
<p>找出占用空间较大的目录<br>查看/home占用的空间</p>
<p>#du-hs/home<br>1<br>查看/home下占用空间超过1000m</p>
<p>#du/awk’$1&gt;;2000’</p>
<p>找出占用空间较大的文件</p>
<p>#find/home-size +2000K</p>
<p>找出最近修改或创建的文件<br>先TOUCH一个你想要的时间的文件如下</p>
<p>#TOUCH-t 08190800 test</p>
<p>#find/home-newer test-print</p>
<p>删除日志</p>
<p>#rm-rf/var/log/*</p>
<p>对分区做连接<br>在有空间的分区，对没有空进分区做连接</p>
<p>#in-s/home/use/home</p>
<p>找出耗费大量的空间的进程<br>根据不同的应用，找出对应的进程，分析原因。</p>
<p>检查并修复文件系统</p>
<p>#fsck-y/home<br>1<br>重启机器<br>有了以上的十招，应该可以解决大部分问题，但是关键还是安装时要规划好分区。另外发现磁盘蛮时，不能急，小心操作，认真分析原因，然后小心应对。需要注 意，以上十招不需要顺序执行，有的可能一招封喉，有的可能需要数招并用，删除操作一定要小心。如果还不行，只有采取增加硬盘，重新安装系统等“硬”办法了<br>　　还可以：</p>
<p>cd/<br>du-h–max-depth=q/grep M/sort-n</p>
<p>　　找到最大的那个目录后进入该目录<br>　　再运行du-h-max-depth=1/grep M /sort-n<br>　　找出来以后看是否有用的文件<br>　　没用就删掉</p>
</div><div class="tags"><a href="/tags/linux/">linux</a></div><div class="post-share"></div><div class="post-nav"><a href="/2017/10/25/2017-10-25.linux ntp 同步时间/" class="pre">在linux ntp 时间同步</a><a href="/2017/09/27/2017-09-27.不朽的失眠/" class="next">不朽的失眠</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#linux下查找大文件"><span class="toc-text">linux下查找大文件</span></a></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/30/2017-10-30.在linux添加定时任务/">linux添加定时任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/2017-10-26.在linux查看安装包/">linux下查找大文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/2017-10-25.在linux下如何将文件夹打包/">在linux下如何将文件夹打包</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/2017-10-25.linux ntp 同步时间/">在linux ntp 时间同步</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/25/2017-10-26.在linux下查找大文件/">linux下查找大文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/27/2017-09-27.不朽的失眠/">不朽的失眠</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/30/2016-12-30.Spark RPC通信层分析/">Spark RPC通信层分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/14/duoshuo-disqus-comment-count/">获取多说和 Disqus 文章评论数的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/13/hexo-collapsible-toc/">为 Hexo 添加可折叠的文章目录</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/31/hexo-local-search/">让 Hexo 博客支持本地站内搜索</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/散文/">散文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/术业专攻/">术业专攻</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/自用笔记/">自用笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/自用笔记/术业专攻/">术业专攻</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/触类旁通/">触类旁通</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/PowerPoint/" style="font-size: 15px;">PowerPoint</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/EndNote/" style="font-size: 15px;">EndNote</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/Reference/" style="font-size: 15px;">Reference</a> <a href="/tags/Windows/" style="font-size: 15px;">Windows</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/Software/" style="font-size: 15px;">Software</a> <a href="/tags/多说/" style="font-size: 15px;">多说</a> <a href="/tags/UA/" style="font-size: 15px;">UA</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/TagCloud/" style="font-size: 15px;">TagCloud</a> <a href="/tags/Excel/" style="font-size: 15px;">Excel</a> <a href="/tags/Table/" style="font-size: 15px;">Table</a> <a href="/tags/GitHub/" style="font-size: 15px;">GitHub</a> <a href="/tags/PhotoShop/" style="font-size: 15px;">PhotoShop</a> <a href="/tags/GIF/" style="font-size: 15px;">GIF</a> <a href="/tags/PNG/" style="font-size: 15px;">PNG</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/Anki/" style="font-size: 15px;">Anki</a> <a href="/tags/Sublime/" style="font-size: 15px;">Sublime</a> <a href="/tags/font-family/" style="font-size: 15px;">font-family</a> <a href="/tags/Browsersync/" style="font-size: 15px;">Browsersync</a> <a href="/tags/DNS/" style="font-size: 15px;">DNS</a> <a href="/tags/Font-Awesome/" style="font-size: 15px;">Font-Awesome</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/Disqus/" style="font-size: 15px;">Disqus</a> <a href="/tags/JSON/" style="font-size: 15px;">JSON</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/rpc/" style="font-size: 15px;">rpc</a> <a href="/tags/散文/" style="font-size: 15px;">散文</a> <a href="/tags/Yelee/" style="font-size: 15px;">Yelee</a> <a href="/tags/ntp/" style="font-size: 15px;">ntp</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/zip/" style="font-size: 15px;">zip</a> <a href="/tags/tar/" style="font-size: 15px;">tar</a> <a href="/tags/crontable/" style="font-size: 15px;">crontable</a> <a href="/tags/WordPress/" style="font-size: 15px;">WordPress</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><!--a(href=config.root+"about/")= __("about")--></p><p><span> Copyright &copy;<a href="/." rel="nofollow">xcoder.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>